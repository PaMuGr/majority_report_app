<!DOCTYPE html>
<html>
<head>
    <title>Majority Report</title>
    <link rel="stylesheet" href="css/index.css">
    <!-- Add Firebase SDK -->
    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCyOgBBXIo5C-LtsbrdxZepRZoWeF7r17M",
            authDomain: "majority-report-33739.firebaseapp.com",
            projectId: "majority-report-33739",
            storageBucket: "majority-report-33739.appspot.com",
            messagingSenderId: "96713972972",
            appId: "1:96713972972:web:ecdba62f0a3c29d01259c9",
            measurementId: "G-Z379S3VVY9"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Check auth state when page loads
        document.addEventListener("DOMContentLoaded", () => {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    // User is signed in
                    const displayName = user.displayName || "User";
                    
                    // Update all placeholders with the username
                    document.querySelectorAll('p, h2').forEach(element => {
                        if (element.textContent.includes('@user') || element.textContent.includes('@USERNAME')) {
                            element.textContent = element.textContent.replace('@user', displayName)
                                                                     .replace('@USERNAME', displayName.toUpperCase());
                        }
                    });
                } else {
                    // User is not signed in, redirect to login
                    window.location.href = "index.html";
                }
            });
        });
    </script>
</head>

<body>
    <nav>    
        <ul class="navigator">
            <li><a href="home.html" ><img src="graphics/home-icon.png"  height="20"  ></a></li>
            <li class="align-right">
                <a href="home.html"> <img src="graphics/user.png" height="20"> </a>
                <ul class="dropdown">
                    <li><a href="index.html">Log out</a></li>
                </ul>
            </li>
            <li><a href="leaderboard.html"><img src="graphics/bp.png" height="20"></a></li>
        </ul>
    </nav>
    <br><br><br><br>

    <h1 style="text-align: center;"> Majority Report</h1>
    <br><br><br>

    <p style="text-align: center;">Welcome back @user!</p>
    <br><br>
    <a href="questions.html">
        <button class="go_button">
            <h3>Answer today's question!</h3>
        </button>
    </a>

    <br><br>
    <div class="box">
        <h2>STATS:</h2>
        <h2 style="text-align: center;">@USERNAME</h2><br><br>
        <ul>
            <div class="shade_box"><li>Level:</li></div>
            <br>
            <div class="shade_box"><li>Ratio:</li></div>
            <br>
            <div class="shade_box"><li>Global Rank:</li></div>
        </ul>
    </div>
    <br><br><br><br><br><br><br><br><br><br>

    <footer>
        <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
            <div style="margin: 0 20px;">
                <p>Author: Marlon Folch</p>
                <p><a href="mailto:marlon.folch@estudiantat.upc.edu" style="color: #112D4E">marlon.folch@estudiantat.upc.edu</a></p>
            </div>
            <div style="margin: 0 20px;">
                <p>Author: Pau Muras</p>
                <p><a href="mailto:pau.muras@estudiantat.upc.edu" style="color: #112D4E">pau.muras@estudiantat.upc.edu</a></p>
            </div>
            <div style="margin: 0 20px;">
                <p>Author: Marcel Grau</p>
                <p><a href="mailto:marcel.grau.martin@estudiantat.upc.edu" style="color: #112D4E">marcel.grau.martin@estudiantat.upc.edu</a></p>
            </div>
            <div style="margin: 0 20px;">   
                <p>Author: Joe Mac Manus</p>
                <p><a href="mailto:joemacbcn@gmail.com" style="color: #112D4E">joemacbcn@gmail.com</a></p>
            </div>
        </div>
    </footer>
</body>
</html>