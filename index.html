<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Majority Report</title>

  <!-- 1) Prevent flash of content -->
  <style>body { visibility: hidden; }</style>

  <!-- 2) Module-based Firebase SDK -->
  <script type="module">
    import { initializeApp }           from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    // 3) Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCyOgBBXIo5C-LtsbrdxZepRZoWeF7r17M",
      authDomain: "majority-report-33739.firebaseapp.com",
      projectId: "majority-report-33739",
      storageBucket: "majority-report-33739.appspot.com",
      messagingSenderId: "96713972972",
      appId: "1:96713972972:web:ecdba62f0a3c29d01259c9",
      measurementId: "G-Z379S3VVY9"
    };

    // 4) Init Firebase and Auth
    const app  = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // 5) Immediately check auth state
    onAuthStateChanged(auth, user => {
      if (user) {
        // Already signed in: redirect
        window.location.replace("home.html");
      } else {
        // Not signed in: reveal the page
        document.body.style.visibility = "visible";
      }
    });
  </script>

  <!-- 6) Your CSS -->
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/profile.css">
</head>

<body>
  <div class="page-container">
    <nav>    
      <ul class="navigator">
        <li><a href="index.html"><img src="graphics/home-icon.png" height="20"></a></li>
        <li class="align-right">
          <a><img src="graphics/user.png" height="20"></a>
          <ul class="dropdown">
            <li><button onclick="location.href='login.html';" class="list-button">Log in</button></li>
            <li><button onclick="location.href='sign_up.html';" class="list-button">Sign Up</button></li>
          </ul>
        </li>
      </ul>
    </nav>

    <main>
      <h1 class="text" style="text-align: center;">Majority Report</h1>
      <p style="text-align: center; font-family: sans-serif; margin-top:1rem;">
        Welcome to Majority Report, a research-oriented website whose goal<br>
        is to compare how the majority thinks with your own perception.
      </p>

      <div class="center-buttons" style="margin-top:2rem;">
        <a href="sign_up.html"><button class="button-primary">Sign Up</button></a>
        <p style="margin:1rem 0; font-family:'Poppins',sans-serif; text-align:center;">
          --- or if you already have an account ---
        </p>
        <a href="login.html"><button class="button-secondary">Log In</button></a>
      </div>
    </main>

    <footer class="site-footer">
      <div class="authors-inline">
        <span><a href="mailto:marlon.folch@estudiantat.upc.edu">Marlon Folch</a></span>
        <span><a href="mailto:pau.muras@estudiantat.upc.edu">Pau Muras</a></span>
        <span><a href="mailto:marcel.grau.martin@estudiantat.upc.edu">Marcel Grau</a></span>
        <span><a href="mailto:joemacbcn@gmail.com">Joe Mac Manus</a></span>
      </div>
    </footer>
  </div>
</body>
</html>
